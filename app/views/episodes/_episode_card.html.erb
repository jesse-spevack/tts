<%= turbo_frame_tag dom_id(episode), data: { testid: "episode-card" } do %>
  <%= render "shared/card" do %>
    <div class="mb-2 flex justify-between items-center">
      <div class="flex items-center gap-2">
        <%= status_badge(episode.status) %>
      </div>
      <%= render "episodes/episode_actions", episode: episode, layout: :compact %>
    </div>
    <% if episode.failed? && episode.error_message.present? %>
      <p class="text-sm text-[var(--color-red)] mt-1"><%= episode.error_message %></p>
    <% end %>
    <h2 class="text-lg font-semibold mb-1"><%= episode.title %></h2>
    <% if episode.url? && episode.source_url.present? %>
      <p class="text-xs text-[var(--color-subtext)] truncate mb-1">
        <%= link_to episode.source_url, episode.source_url, target: "_blank", class: "hover:underline" %>
      </p>
    <% end %>
    <div class="flex justify-between items-center text-sm text-[var(--color-subtext)]">
      <span>by <%= episode.author %></span>
      <span><%= episode.created_at.strftime("%b %d, %Y") %></span>
    </div>
    <p class="mt-2 text-xs text-[var(--color-subtext)] font-mono truncate">
      <%= episode.content_preview %>
    </p>
  <% end %>
<% end %>
