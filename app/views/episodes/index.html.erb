<%= turbo_stream_from "podcast_#{@podcast.id}_episodes" %>

<div>
  <div class="flex flex-col gap-4 mb-8 md:flex-row md:justify-between md:items-start">
    <div>
      <h1 class="text-2xl font-semibold mb-2">Episodes</h1>
      <p class="text-sm text-[var(--color-subtext)] flex items-center gap-2">
        RSS Feed: <%= link_to @podcast.feed_url, @podcast.feed_url, class: "text-[var(--color-primary)] hover:underline break-all", target: "_blank" %>
        <%= render "shared/clipboard_button",
          content: @podcast.feed_url,
          title: "Copy RSS feed URL",
          icon: "copy",
          button_class: "text-[var(--color-subtext)] hover:text-[var(--color-primary)] transition-colors cursor-pointer flex-shrink-0"
        %>
      </p>
    </div>
    <%= link_to new_episode_path, class: "#{button_classes(type: :primary)} w-full md:w-auto text-center" do %>
      + New Episode
    <% end %>
  </div>

  <%= turbo_frame_tag "episodes_list" do %>
    <% if @episodes.any? %>
      <div class="flex flex-col gap-3">
        <% @episodes.each do |episode| %>
          <%= render "episode_card", episode: episode %>
        <% end %>
      </div>

      <%= render "pagination", pagy: @pagy %>
    <% else %>
      <%= render "shared/card", padding: "p-12" do %>
        <div class="text-center">
          <div class="max-w-sm mx-auto">
            <p class="text-lg mb-4">No episodes yet</p>
            <ol class="text-left text-[var(--color-subtext)] space-y-2">
              <li>1. Click <strong>+ New Episode</strong> above</li>
              <li>2. Upload a text file with your content</li>
              <li>3. We'll generate the audio for you</li>
            </ol>
          </div>
        </div>
      <% end %>
    <% end %>
  <% end %>
</div>
