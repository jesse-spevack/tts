<div class="max-w-2xl mx-auto">
  <%= render "shared/back_link", path: settings_path, text: "Back to Settings" %>
  <%= render "shared/page_header", title: "Browser Extension" %>

  <div class="space-y-6">
    <%= render "shared/card", padding: "p-4 sm:p-8" do %>
      <h2 class="text-lg font-medium mb-2">Connection Status</h2>

      <% if @api_token %>
        <div class="flex items-center gap-2 mb-4">
          <span class="inline-block w-2 h-2 rounded-full bg-[var(--color-green)]"></span>
          <span class="text-[var(--color-text)]">Connected</span>
        </div>

        <dl class="space-y-3 text-sm">
          <div class="flex justify-between">
            <dt class="text-[var(--color-subtext)]">Last used</dt>
            <dd>
              <% if @api_token.last_used_at %>
                <%= time_ago_in_words(@api_token.last_used_at) %> ago
              <% else %>
                Never
              <% end %>
            </dd>
          </div>
          <div class="flex justify-between">
            <dt class="text-[var(--color-subtext)]">Connected since</dt>
            <dd><%= @api_token.created_at.strftime("%B %d, %Y") %></dd>
          </div>
        </dl>

        <div class="mt-6 pt-6 border-t border-[var(--color-overlay0)]">
          <%= button_to "Disconnect Extension",
                        settings_extensions_path,
                        method: :delete,
                        class: "text-sm text-[var(--color-red)] hover:underline",
                        data: {
                          turbo_confirm: "Are you sure you want to disconnect the extension? You'll need to reconnect from the extension to use it again."
                        } %>
        </div>
      <% else %>
        <div class="flex items-center gap-2 mb-4">
          <span class="inline-block w-2 h-2 rounded-full bg-[var(--color-overlay1)]"></span>
          <span class="text-[var(--color-subtext)]">Not connected</span>
        </div>

        <p class="text-sm text-[var(--color-subtext)]">
          Install the Chrome extension and click the icon while logged in to connect.
        </p>
      <% end %>
    <% end %>

    <%= render "shared/card", padding: "p-4 sm:p-8" do %>
      <h2 class="text-lg font-medium mb-2">Get the Extension</h2>
      <p class="text-[var(--color-subtext)] text-sm mb-4">
        Send any article to your TTS podcast with one click.
      </p>
      <p class="text-[var(--color-subtext)] text-sm">
        Chrome Web Store link coming soon.
      </p>
    <% end %>
  </div>
</div>
