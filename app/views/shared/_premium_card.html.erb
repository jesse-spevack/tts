<%# locals: (mode:) %>
<div class="rounded-2xl p-8 ring-2 ring-mist-950 dark:ring-white">
  <div class="flex items-center justify-between">
    <h3 class="text-lg font-semibold text-mist-950 dark:text-white">Premium</h3>
    <% if mode == :landing %>
      <span class="rounded-full bg-mist-950/10 dark:bg-white/10 px-3 py-1 text-xs font-semibold text-mist-950 dark:text-white">
        Most popular
      </span>
    <% else %>
      <span data-pricing-toggle-target="popularBadge" class="rounded-full bg-mist-950/10 dark:bg-white/10 px-3 py-1 text-xs font-semibold text-mist-950 dark:text-white">
        Most popular
      </span>
    <% end %>
  </div>

  <p class="mt-4 text-sm text-mist-500 dark:text-mist-400">
    For serious readers and listeners.
  </p>

  <p class="mt-6 hidden" data-pricing-toggle-target="monthlyPrice">
    <span class="text-4xl font-semibold tracking-tight text-mist-950 dark:text-white">$9</span>
    <span class="text-sm text-mist-500 dark:text-mist-400">/month</span>
  </p>
  <p class="mt-6" data-pricing-toggle-target="annualPrice">
    <span class="text-4xl font-semibold tracking-tight text-mist-950 dark:text-white">$89</span>
    <span class="text-sm text-mist-500 dark:text-mist-400">/year</span>
  </p>

  <% if mode == :landing %>
    <button
      type="button"
      data-action="click->signup-modal#open"
      data-plan="premium_annual"
      data-pricing-toggle-target="premiumLink"
      class="mt-6 block w-full rounded-lg bg-mist-950 dark:bg-white px-4 py-2.5 text-center text-sm font-semibold text-white dark:text-mist-950 shadow-sm hover:bg-mist-800 dark:hover:bg-mist-200"
    >
      Get Premium
    </button>
  <% else %>
    <%= form_with url: checkout_path, method: :post, class: "mt-6", data: { turbo: false } do |form| %>
      <%= form.hidden_field :price_id, value: AppConfig::Stripe::PRICE_ID_ANNUAL, data: { pricing_toggle_target: "priceField" } %>
      <%= form.submit "Subscribe", class: "w-full rounded-lg bg-mist-950 dark:bg-white px-4 py-2.5 text-center text-sm font-semibold text-white dark:text-mist-950 shadow-sm hover:bg-mist-800 dark:hover:bg-mist-200 cursor-pointer" %>
    <% end %>
  <% end %>

  <% premium_features = [
    "Everything in Free, plus:",
    "Unlimited episodes",
    "Up to 50,000 characters"
  ] %>
  <ul class="mt-8 space-y-3 text-sm text-mist-500 dark:text-mist-400">
    <% premium_features.each do |feature| %>
      <%= render "shared/feature_list_item", text: feature %>
    <% end %>
  </ul>
</div>
