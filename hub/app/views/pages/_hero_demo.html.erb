<%# Hero demo animation - assembles all frames with Stimulus controller %>

<div
  data-controller="demo-animation"
  class="w-full max-w-sm mx-auto"
  aria-label="Demo showing how to convert an article to a podcast episode"
>
  <%# Animation container %>
  <div class="relative rounded-lg border border-[var(--color-text)]/20 p-6">
      <%# Play button overlay - click to start demo %>
      <div
        data-demo-animation-target="overlay"
        data-action="click->demo-animation#play"
        class="absolute inset-0 z-10 flex flex-col items-center justify-center cursor-pointer rounded-lg bg-[var(--color-base)]"
      >
        <%# Play button circle %>
        <div class="w-14 h-14 rounded-full bg-[var(--color-primary)] flex items-center justify-center hover:scale-105 transition-transform text-[var(--color-primary-text)]">
          <%= render "shared/icons/play", css_class: "w-6 h-6" %>
        </div>
        <span class="mt-3 text-sm text-[var(--color-subtext)]">See how it works</span>
      </div>

      <%# Invisible height placeholder - uses tallest frame (podcast) to prevent layout shift %>
      <div class="invisible" aria-hidden="true">
        <%= render "pages/demo_frame_podcast" %>
      </div>

      <%# Frame 1: URL Input - starts visible %>
      <div data-demo-animation-target="frame" class="demo-frame absolute inset-0 opacity-100">
        <%= render "pages/demo_frame_input" %>
      </div>

      <%# Frame 2: Button Click %>
      <div data-demo-animation-target="frame" class="demo-frame absolute inset-0 hidden opacity-0">
        <%= render "pages/demo_frame_click" %>
      </div>

      <%# Frame 3: Processing %>
      <div data-demo-animation-target="frame" class="demo-frame absolute inset-0 hidden opacity-0">
        <%= render "pages/demo_frame_processing" %>
      </div>

      <%# Frame 4: Success %>
      <div data-demo-animation-target="frame" class="demo-frame absolute inset-0 hidden opacity-0">
        <%= render "pages/demo_frame_success" %>
      </div>

      <%# Frame 5: Transition %>
      <div data-demo-animation-target="frame" class="demo-frame absolute inset-0 hidden opacity-0">
        <%= render "pages/demo_frame_transition" %>
      </div>

      <%# Frame 6: Podcast App %>
      <div data-demo-animation-target="frame" class="demo-frame absolute inset-0 hidden opacity-0">
        <%= render "pages/demo_frame_podcast" %>
      </div>

      <%# Static fallback for reduced motion (visible only when JS detects reduced motion) %>
      <noscript>
        <%= render "pages/demo_frame_success" %>
      </noscript>
  </div>

  <%# Replay button - shown after animation completes %>
  <button
    data-demo-animation-target="replay"
    data-action="click->demo-animation#replay"
    class="mt-4 mx-auto flex items-center gap-2 text-sm text-[var(--color-subtext)] hover:text-[var(--color-primary)] cursor-pointer invisible opacity-0 transition-opacity duration-300"
  >
    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
    </svg>
    Watch again
  </button>
</div>
