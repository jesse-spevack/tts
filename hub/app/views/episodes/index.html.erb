<%= turbo_stream_from "podcast_#{@podcast.id}_episodes" %>

<div>
  <div class="flex justify-between items-start mb-8">
    <div>
      <h1 class="text-2xl font-semibold mb-2">Episodes</h1>
      <p class="text-sm text-[var(--color-subtext)] flex items-center gap-2">
        RSS Feed: <%= link_to @podcast.feed_url, @podcast.feed_url, class: "text-[var(--color-primary)] hover:underline", target: "_blank" %>
        <button type="button"
                data-controller="clipboard"
                data-clipboard-content-value="<%= @podcast.feed_url %>"
                data-action="click->clipboard#copy"
                class="text-[var(--color-subtext)] hover:text-[var(--color-primary)] transition-colors cursor-pointer"
                title="Copy RSS feed URL">
          <span data-clipboard-target="copyIcon"><%= render "shared/icons/copy" %></span>
          <span data-clipboard-target="checkIcon" class="hidden text-[var(--color-green)]"><%= render "shared/icons/document_check" %></span>
        </button>
      </p>
    </div>
    <%= link_to new_episode_path, class: button_classes(type: :primary) do %>
      + New Episode
    <% end %>
  </div>

  <% if @episodes.any? %>
    <div class="flex flex-col gap-3">
      <% @episodes.each do |episode| %>
        <%= render "episode_card", episode: episode %>
      <% end %>
    </div>
  <% else %>
    <%= render "shared/card", padding: "p-12" do %>
      <div class="text-center">
        <div class="max-w-sm mx-auto">
          <p class="text-lg mb-4">Get started:</p>
          <ol class="text-left text-[var(--color-subtext)] mb-6 space-y-2">
            <li>1. Create an episode</li>
            <li>2. Upload your markdown</li>
            <li>3. We generate the audio</li>
          </ol>
          <%= link_to new_episode_path, class: "inline-block #{button_classes(type: :primary)}" do %>
            + Create Episode
          <% end %>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
