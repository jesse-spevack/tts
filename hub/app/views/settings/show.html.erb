<div class="max-w-2xl mx-auto">
  <h1 class="text-2xl font-semibold mb-8">Settings</h1>

  <%= render "shared/card", padding: "p-4 sm:p-8" do %>
    <%= form_with url: settings_path, method: :patch, class: "space-y-6" do %>
      <h2 class="text-lg font-medium">Voice</h2>
      <p class="text-[var(--color-subtext)] text-sm">Choose the voice for your podcast episodes.</p>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <% @voices.each do |voice| %>
          <label class="relative block cursor-pointer">
            <input type="radio" name="voice" value="<%= voice[:key] %>"
                   <%= "checked" if @selected_voice == voice[:key] %>
                   class="peer sr-only">
            <div class="border-2 rounded-lg p-4 transition-colors
                        border-[var(--color-overlay0)] peer-checked:border-[var(--color-primary)]
                        peer-checked:bg-[var(--color-primary)]/5">
              <div class="flex items-center justify-between mb-2">
                <span class="font-medium"><%= voice[:name] %></span>
                <div class="w-4 h-4 rounded-full border-2
                            border-[var(--color-overlay0)] peer-checked:border-[var(--color-primary)]
                            peer-checked:bg-[var(--color-primary)]"></div>
              </div>
              <p class="text-sm text-[var(--color-subtext)]">
                <%= voice[:accent] %> &middot; <%= voice[:gender] %>
              </p>
              <button type="button"
                      data-controller="audio-preview"
                      data-audio-preview-url-value="<%= voice[:sample_url] %>"
                      data-action="click->audio-preview#play"
                      class="mt-3 text-sm text-[var(--color-primary)] hover:underline">
                &#9654; Preview
              </button>
            </div>
          </label>
        <% end %>
      </div>

      <%= submit_tag "Save Changes", class: button_classes(type: :primary) %>
    <% end %>
  <% end %>
</div>
